title: 移动端开发总结--像素篇
date: 2019-01-29 17:41:04
tags:
- 移动端

---

之前一直做web相关的开发，自从支援新的小组后，移动端和web端都在做了，以前觉得移动端就是HTML5，只要会HTML，应该就是问题不大，接触之后，发现还是`too young too naivee `，先来总结下做移动端关于像素的问题，有时间会继续总结下其他关于移动端的知识。
<!--more-->

### 布局视口

PC端，布局视口和浏览器可视窗口宽度(或者浏览器本身的宽度)是一样的。
移动端，布局视口与移动端浏览器屏幕宽度不再相关联，是完全独立的，这个浏览器厂商定的视口被称为布局视口。

### 视觉视口

用户看到的网页区域就是视觉视口

### 理想视口

布局视口的宽度等于屏幕的宽度

```
<meta name="viewport" content="width=device-width,initial-scale=1">
```

缩放不会影响布局视口，但是会影响视觉视口，页面被用户放大，视觉视口内CSS像素数量减少；被用户缩小，视觉视口内CSS像素数量增多。

### 设备像素比(DPR)

```
   dpr = 物理像素 / css像素
```

物理像素是设备屏幕的像素，任何设备的物理像素都是固定的。
css像素又称逻辑像素，是我们写css用到的像素。

可以通过`js`获得： `window.devicePixelRatio`

### 关于模糊

dpr(设备像素比)为1的情况下，1个css像素对应一个物理像素
dpr(设备像素比)为2的情况下，1个css像素对应 2 X 2, 4个物理像素

位图像素是栅格图像最小的数据单元，包含自身的像素信息。正常情况下，1个位图像素对应1个物理像素，图片才会清晰。
但是，dpr = 2的情况下，1个位图像素对应于4个物理像素，由于单个位图像素不可以再进一步分割，所以只能就近取色，从而导致图片模糊。

设计师所有的尺寸都是基于物理像素的，而前端编写的css则是基于css像素的，所以开发的时候看UI稿的时候，编写CSS,往往是需要按dpr(设备像素比)进行缩放。

那么，如果 dpr = 1的情况下，使用2倍的图片情况会怎样？

这时，1个物理像素对应着4个位图像素。取色，会通过算法缩减；像素总数，是原图像的总数的四分之一。

