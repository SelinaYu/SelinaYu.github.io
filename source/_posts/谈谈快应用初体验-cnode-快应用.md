title: 谈谈快应用初体验-cnode 快应用
date: 2019-01-25 17:17:18
tags: 
- 移动端

---


## 前言
2018年3月份，十家手机厂商共同推出了新型应用生态，快应用，主打特点： 原生APP的应用体验，无需安装，即点即用。如今2019年，前几天我在我的华为手机应用市场安装APP的时候，发现多了快应用的入口，一些常用的app也出了对应的快应用，如微博，美团，天猫，携程等等。有人指出快应用的出现，是为了抵抗小程序对应用商店的冲击，避免被边缘化。从用户体验来看，快应用和小程序的相差无几，两者之间的竞争意味非常明显。为了体验下快应用，自己也尝试做了个 cnode版 的快应用。

<!--more-->


## 体验快应用
1.通过 npm 仓库安装，在命令行中执行以下命令：

```
npm install -g hap-toolkit
```
2.安装手机调试器和平台预览版，可在 [资源下载][1] 对应的资源。
3.创建项目，安装依赖
```
hap init <ProjectName>
```
这个项目已经包含了项目配置与示例页面的初始代码，项目根目录主要结构如下：
```

├── sign                      rpk包签名模块
│   └── debug                 调试环境
│       ├── certificate.pem   证书文件
│       └── private.pem       私钥文件
├── src
│   ├── Common                公用的资源和组件文件
│   │   └── logo.png          应用图标
│   ├── Demo                  页面目录
│   |   └── index.ux          页面文件，可自定义页面名称
│   ├── app.ux                APP文件，可引入公共脚本，暴露公共数据和方法等
│   └── manifest.json         项目配置文件，配置应用图标、页面路由等
└── package.json              定义项目需要的各种模块及配置信息
```
4.安装依赖，启动服务器
```
npm install  
npm run server 
```
4.扫码预览
 扫码预览，需确保手机与 PC 在同一局域网。如果手机与 PC 不在同一局域网，可以使用 USB 在线更新和本地安装预览运行效果。
 
其实上面这些，官方文档都有，想要了解更多的可以看官方文档。主要是来讲下我遇到的坑和感受。

## 我遇到的坑

### 1.安装失败

我做cnode 版的快应用一开始用的是v1010的版本，后来才升级到v1030,当时安装经常会遇到安装失败，报如下错误：
```
Error: Cannot find module '/Users/***/***/node_modules/hap-tools/webpack.config.js'
```
要解决上述问题，需要执行一遍`hap update --force`，然后再重新 `npm run build`。

### 2. HTML5 && 快应用

一开始写快应用的时候，我粗略看了下和vue的写法差不多，以为组件里使用的就是HTML标签。然而，实际上并不是这样子。虽然快应用使用的是前端技术栈，但没有采用传统浏览器内核的运行模式，而是使用全新的引擎，将系统原生的渲染机制和接口能力提供给上层应用，使得快应用的能力和体验基本等同于原生应用。通过这套引擎，快应用可以使用包括硬件在内的大量系统能力，例如推送、账号、支付、统计等。

开发快应用版的cnode的时候，列表详情返回的是原生HTML，快应用又无法兼容所有`HTML`,最后只能使用`webview`加载页面了。

**注意： 由于快应用是采用原生的方式来实现的，他只是模拟了部分 `HTML` 标签, 没有实现全部的 `HTML` 标签, 而且在使用上和相同`HTML`标签也有一些区别。组件嵌套也有限制，不然会报错。不仅仅是`HTML`，`CSS`的用法也是如此。**

### 3.小程序和快应用

小程序有微信这个平台作为依托，社交互动性比快应用要强一些。但是兼容性(在不同机型可能卡顿)，广告这方面的体验不及快应用的好。快应用内存占用小，即点即用，很方便，而且还没有广告。


## 快应用版 cnode

[github 地址  cnode 社区 快应用][2]
预览：


![此处输入图片的描述][3]


## 参考链接

[快应用官方文档][4]


  [1]: https://www.quickapp.cn/docCenter/post/69
  [2]: https://github.com/SelinaYu/quick-cnode
  [3]: https://s2.ax1x.com/2019/01/24/kZONin.jpg
  [4]: https://doc.quickapp.cn/tutorial/